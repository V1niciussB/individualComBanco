<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="stylesheet" href="css/styleAdmin.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <title> Gráficos Ativos </title>
</head>

<body>
  <div class="mae">
    <div class="navBar">
      <div class="cbar">
        <div class="list">
          <ion-icon name="person-circle-outline" class="circulo"></ion-icon>
          <a href="#">
            <ion-icon name="stats-chart-outline" class="desenhoBar"></ion-icon>
          </a>
          <a href="competicao.html">
            <ion-icon name="list-outline" class="desenhoBar"></ion-icon>
          </a>
        </div>
        <div class="exit">
          <a href="../quem somos/quemsomos.html">
            <ion-icon name="exit-outline" class="desenhoBar"></ion-icon>
          </a>
        </div>
      </div>
    </div>



    <div class="corpoGrafico">
      <div class="grafico 1">
        <div>
          <canvas id="chartBar"></canvas>
        </div>

      </div>
      <div class="grafico 2">
        <canvas id="chartDoughnut"></canvas>
      </div>
    </div>
  </div>


</body>

</html>

<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

<script>
// Plotar o gráfico de barras na tela
  fetch(`/usuarios/selectGenero`, {
    headers: {
      "Content-type": "application/json"
    }
  })
    .then(function (resposta) {
      console.log(resposta)
      resposta.json()
        .then(function (resposta) {
          console.log("publico por genero: ", resposta)
          var dados = []
          for(var i = 0; i < resposta.length; i++){
            dados.push(resposta[i].genero)
          }
          plotarGraficoGenero(dados)
        })
    })


  function plotarGraficoGenero(dados) {
    const labelsBar = [
      'Masculino',
      'Feminino',
    ];

    const dataBar = {
      labels: labelsBar,
      datasets: [{
        label: 'Nadadores por genêro',
        backgroundColor: ["#2596be", "#D83234"],
        borderColor: 'rgb(255, 99, 132)',
        data: dados,
      }]
    };

    const configBar = {
      type: 'bar',
      data: dataBar,
      options: {}
    };

    const bar = new Chart(
      document.getElementById('chartBar'),
      configBar
    );

  }

// Plotar o gráfico de doghnut na tela
  const dataModali = {
  labels: [
    'Red',
    'Blue',
    'Yellow'
  ],
  datasets: [{
    label: 'My First Dataset',
    data: [300, 50, 100],
    backgroundColor: [
      'rgb(255, 99, 132)',
      'rgb(54, 162, 235)',
      'rgb(255, 205, 86)'
    ],
    hoverOffset: 4
  }]
};
</script>
<script>


const configModali = {
  type: 'doughnut',
  data: dataModali,
};

const modali = new Chart(
      document.getElementById('chartDoughnut'),
      configModali
    );

</script>